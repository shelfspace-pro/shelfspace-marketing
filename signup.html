<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sign Up — ShelfSpace</title>
<meta name="description" content="Create your ShelfSpace account. Get started with scan-based trading for your cannabis business.">
<link rel="canonical" href="https://shelfspace.pro/signup">
<meta property="og:type" content="website">
<meta property="og:url" content="https://shelfspace.pro/signup">
<meta property="og:title" content="Sign Up — ShelfSpace">
<meta property="og:description" content="Create your ShelfSpace account. Get started with scan-based trading for your cannabis business.">
<meta property="og:image" content="https://shelfspace.pro/og-image.png">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="Sign Up — ShelfSpace">
<meta name="twitter:description" content="Create your ShelfSpace account. Get started with scan-based trading for your cannabis business.">
<meta name="twitter:image" content="https://shelfspace.pro/og-image.png">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,300;0,9..40,400;0,9..40,500;0,9..40,600;0,9..40,700&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="styles.css">
<script src="https://challenges.cloudflare.com/turnstile/v0/api.js" async defer></script>
<style>
  .page-hero { padding-bottom: 40px; }
  .signup-section { background: var(--white); padding-top: 60px; }
  .signup-container {
    max-width: 960px; margin: 0 auto; padding: 0 24px;
    display: grid; grid-template-columns: 1fr 520px; gap: 48px; align-items: start;
  }

  /* Value-prop sidebar */
  .signup-sidebar {
    padding-top: 12px;
  }
  .signup-sidebar h3 {
    font-size: 20px; font-weight: 700; color: var(--green-deep); margin-bottom: 24px;
  }
  .signup-sidebar-list {
    list-style: none; padding: 0; margin: 0 0 32px;
  }
  .signup-sidebar-list li {
    display: flex; align-items: flex-start; gap: 10px;
    font-size: 15px; color: var(--slate-700); line-height: 1.5;
    margin-bottom: 16px;
  }
  .signup-sidebar-list li svg {
    flex-shrink: 0; width: 20px; height: 20px; color: var(--green-mid); margin-top: 2px;
  }
  .signup-sidebar-quote {
    border-top: 1px solid var(--slate-200); padding-top: 24px;
  }
  .signup-sidebar-quote blockquote {
    font-size: 14px; font-style: italic; color: var(--slate-500);
    line-height: 1.7; margin: 0 0 12px; padding: 0;
  }
  .signup-sidebar-quote cite {
    font-size: 13px; font-style: normal; font-weight: 600; color: var(--green-deep);
  }

  .signup-card {
    background: var(--white); border: 1px solid var(--slate-200);
    border-radius: 16px; padding: 40px;
    box-shadow: 0 8px 40px rgba(27,67,50,0.06);
  }
  .signup-card h3 { font-size: 20px; font-weight: 700; color: var(--green-deep); margin-bottom: 8px; }
  .signup-card > p { font-size: 15px; color: var(--slate-500); line-height: 1.6; margin-bottom: 28px; }

  .form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; }
  .form-group { margin-bottom: 20px; }
  .form-group label {
    display: block; font-size: 13px; font-weight: 600;
    color: var(--green-deep); margin-bottom: 6px;
  }
  .form-group input:not([type="checkbox"]),
  .form-group select {
    width: 100%; padding: 12px 16px; border: 1px solid var(--slate-200);
    border-radius: 10px; font-size: 15px; font-family: var(--font-display);
    color: var(--slate-800); background: var(--white);
    transition: border-color 0.2s, box-shadow 0.2s;
    -webkit-appearance: none; appearance: none;
  }
  .form-group input::placeholder { color: var(--slate-400); }
  .form-group input:not([type="checkbox"]):focus,
  .form-group select:focus {
    outline: none; border-color: var(--green-mid);
    box-shadow: 0 0 0 3px rgba(64,145,108,0.1);
  }
  .form-group select {
    background-image: url("data:image/svg+xml,%3Csvg width='12' height='8' viewBox='0 0 12 8' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M1 1.5L6 6.5L11 1.5' stroke='%2394a3b8' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 16px center;
    padding-right: 40px;
    cursor: pointer;
  }
  .form-group select option[value=""] { color: var(--slate-400); }

  .signup-card .btn-primary {
    width: 100%; justify-content: center; margin-top: 4px;
  }
  .signup-card .btn-primary:disabled {
    opacity: 0.6; cursor: not-allowed; transform: none;
    box-shadow: 0 4px 16px rgba(27,67,50,0.15);
  }

  .form-error {
    display: none; margin-top: 16px; padding: 12px 16px;
    background: #fef2f2; border: 1px solid #fecaca; border-radius: 10px;
    font-size: 14px; color: #991b1b; line-height: 1.5;
  }
  .form-success {
    display: none; text-align: center; padding: 24px 0;
  }
  .form-success svg { color: var(--green-mid); margin-bottom: 12px; }
  .form-success h3 { font-size: 20px; font-weight: 700; color: var(--green-deep); margin-bottom: 8px; }
  .form-success p { font-size: 15px; color: var(--slate-500); line-height: 1.6; }

  .login-link {
    text-align: center; margin-top: 24px; font-size: 14px; color: var(--slate-500);
  }
  .login-link a {
    color: var(--green-mid); text-decoration: none; font-weight: 600; transition: color 0.2s;
  }
  .login-link a:hover { color: var(--green-deep); }

  .turnstile-wrapper { display: flex; justify-content: center; }

  .pw-requirements {
    margin-top: 8px; padding: 0; list-style: none;
    display: grid; grid-template-columns: 1fr 1fr; gap: 4px 16px;
  }
  .pw-requirements li {
    font-size: 12px; color: var(--slate-400); display: flex; align-items: center; gap: 6px;
    transition: color 0.2s;
  }
  .pw-requirements li.met { color: var(--green-mid); }
  .pw-requirements li .check-icon { flex-shrink: 0; width: 14px; height: 14px; }

  @keyframes spin { to { transform: rotate(360deg); } }

  .login-link { grid-column: -2 / -1; }
  @media (max-width: 900px) {
    .signup-container { grid-template-columns: 1fr; max-width: 520px; }
    .signup-sidebar { order: 2; }
    .signup-card { order: 1; }
    .login-link { order: 3; grid-column: auto; }
  }
  @media (max-width: 600px) {
    .form-row { grid-template-columns: 1fr; }
    .signup-card { padding: 28px 20px; }
  }
  @media (max-width: 400px) {
    .pw-requirements { grid-template-columns: 1fr; }
  }
</style>
</head>
<body>

<!-- NAV -->
<nav id="nav">
  <a href="/" class="nav-logo">
    <div class="nav-logo-icon"><svg viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="3" x2="12" y2="21"/><line x1="8" y1="21" x2="16" y2="21"/><polyline points="5,7 12,3 19,7"/><polyline points="3,13 5,7 7,13"/><polyline points="17,13 19,7 21,13"/><path d="M3 13a2 2 0 0 0 4 0"/><path d="M17 13a2 2 0 0 0 4 0"/></svg></div>
    <span class="nav-logo-text">ShelfSpace</span>
  </a>
  <ul class="nav-links">
    <li><a href="/features">Features</a></li>
    <li><a href="/how-it-works">How It Works</a></li>
    <li><a href="/pricing">Pricing</a></li>
    <li><a href="/about">About</a></li>
    <li><a href="https://ourshelf.space">Login</a></li>
    <li><a href="/signup" class="nav-cta">Sign Up <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><polyline points="9 18 15 12 9 6"/></svg></a></li>
  </ul>
  <div class="nav-hamburger" onclick="document.querySelector('.nav-links').classList.toggle('mobile-open')"><span></span><span></span><span></span></div>
</nav>

<!-- PAGE HERO -->
<div class="page-hero">
  <div class="section-label">Get Started</div>
  <h1 class="section-title">Create your account</h1>
  <p class="section-desc">Or <a href="#" onclick="openDemoModal();return false;" style="color:var(--green-mid);font-weight:600;text-decoration:none;">try the demo</a> to explore the platform first.</p>
</div>

<!-- SIGNUP FORM -->
<section class="signup-section">
  <div class="signup-container">
    <div class="signup-sidebar">
      <h3>What you get with ShelfSpace</h3>
      <ul class="signup-sidebar-list">
        <li>
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg>
          <span>Free pilot access — no credit card required</span>
        </li>
        <li>
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg>
          <span>Automated weekly settlements & payments</span>
        </li>
        <li>
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg>
          <span>Dedicated portal for your role</span>
        </li>
        <li>
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg>
          <span>Works with any POS system</span>
        </li>
        <li>
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg>
          <span>Check 21-compliant vendor checks</span>
        </li>
        <li>
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg>
          <span>Onboarding support from our team</span>
        </li>
      </ul>
      <div class="signup-sidebar-quote">
        <blockquote>"I built ShelfSpace because I refused to keep watching this industry struggle with broken payment systems."</blockquote>
        <cite>Chris Mitchem, Founder</cite>
      </div>
    </div>

    <div class="signup-card reveal">
      <form id="signupForm">
        <div class="form-row">
          <div class="form-group">
            <label for="firstName">First Name</label>
            <input type="text" id="firstName" name="firstName" placeholder="Jane" required>
          </div>
          <div class="form-group">
            <label for="lastName">Last Name</label>
            <input type="text" id="lastName" name="lastName" placeholder="Doe" required>
          </div>
        </div>

        <div class="form-group">
          <label for="email">Email</label>
          <input type="email" id="email" name="email" placeholder="jane@example.com" required>
        </div>

        <div class="form-group">
          <label for="businessName">Business Name</label>
          <input type="text" id="businessName" name="businessName" placeholder="Your business name" required>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="businessType">Business Type</label>
            <select id="businessType" name="businessType" required>
              <option value="" disabled selected>Select type</option>
              <option value="Retailer">Retailer</option>
              <option value="Vendor">Vendor</option>
            </select>
          </div>
          <div class="form-group">
            <label for="state">State</label>
            <select id="state" name="state" required>
              <option value="" disabled selected>Select state</option>
              <option value="AL">Alabama</option>
              <option value="AK">Alaska</option>
              <option value="AZ">Arizona</option>
              <option value="AR">Arkansas</option>
              <option value="CA">California</option>
              <option value="CO">Colorado</option>
              <option value="CT">Connecticut</option>
              <option value="DE">Delaware</option>
              <option value="FL">Florida</option>
              <option value="GA">Georgia</option>
              <option value="HI">Hawaii</option>
              <option value="ID">Idaho</option>
              <option value="IL">Illinois</option>
              <option value="IN">Indiana</option>
              <option value="IA">Iowa</option>
              <option value="KS">Kansas</option>
              <option value="KY">Kentucky</option>
              <option value="LA">Louisiana</option>
              <option value="ME">Maine</option>
              <option value="MD">Maryland</option>
              <option value="MA">Massachusetts</option>
              <option value="MI">Michigan</option>
              <option value="MN">Minnesota</option>
              <option value="MS">Mississippi</option>
              <option value="MO">Missouri</option>
              <option value="MT">Montana</option>
              <option value="NE">Nebraska</option>
              <option value="NV">Nevada</option>
              <option value="NH">New Hampshire</option>
              <option value="NJ">New Jersey</option>
              <option value="NM">New Mexico</option>
              <option value="NY">New York</option>
              <option value="NC">North Carolina</option>
              <option value="ND">North Dakota</option>
              <option value="OH">Ohio</option>
              <option value="OK">Oklahoma</option>
              <option value="OR">Oregon</option>
              <option value="PA">Pennsylvania</option>
              <option value="RI">Rhode Island</option>
              <option value="SC">South Carolina</option>
              <option value="SD">South Dakota</option>
              <option value="TN">Tennessee</option>
              <option value="TX">Texas</option>
              <option value="UT">Utah</option>
              <option value="VT">Vermont</option>
              <option value="VA">Virginia</option>
              <option value="WA">Washington</option>
              <option value="WV">West Virginia</option>
              <option value="WI">Wisconsin</option>
              <option value="WY">Wyoming</option>
              <option value="DC">District of Columbia</option>
            </select>
          </div>
        </div>

        <div class="form-group">
          <label for="password">Create Your Password</label>
          <input type="password" id="password" name="password" placeholder="Enter a strong password" minlength="8" required>
          <ul class="pw-requirements" id="pwRequirements">
            <li id="pwLen"><svg class="check-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg> 8+ characters</li>
            <li id="pwUpper"><svg class="check-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg> Uppercase letter</li>
            <li id="pwLower"><svg class="check-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg> Lowercase letter</li>
            <li id="pwNum"><svg class="check-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg> Number</li>
            <li id="pwSpecial"><svg class="check-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg> Special character</li>
          </ul>
        </div>

        <div class="form-group" style="margin-bottom:24px;">
          <label style="display:flex;align-items:flex-start;gap:10px;cursor:pointer;font-weight:400;color:var(--slate-600);font-size:13px;line-height:1.5;">
            <input type="checkbox" id="agreeTerms" required style="margin-top:3px;width:16px;height:16px;accent-color:var(--green-mid);flex-shrink:0;cursor:pointer;">
            <span>By creating an account, you agree to our <a href="/terms" target="_blank" style="color:var(--green-mid);text-decoration:none;font-weight:600;">Terms&nbsp;of&nbsp;Service</a> and <a href="/privacy" target="_blank" style="color:var(--green-mid);text-decoration:none;font-weight:600;">Privacy&nbsp;Policy</a>.</span>
          </label>
        </div>

        <div class="form-group turnstile-wrapper">
          <div class="cf-turnstile" data-sitekey="0x4AAAAAACiEpqqSU9lohNi-" data-callback="onTurnstileSuccess" data-expired-callback="onTurnstileExpired"></div>
        </div>

        <button type="submit" class="btn-primary" id="submitBtn" disabled>
          Create Account
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><line x1="5" y1="12" x2="19" y2="12"/><polyline points="12 5 19 12 12 19"/></svg>
        </button>

        <div class="form-error" id="formError"></div>
      </form>

      <div class="form-success" id="formSuccess">
        <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 11-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>
        <h3>Account created</h3>
        <p>You're all set. <a href="https://ourshelf.space" style="color: var(--green-mid); font-weight: 600; text-decoration: none;">Log in to get started.</a></p>
      </div>
    </div>

    <p class="login-link">Already have an account? <a href="https://ourshelf.space">Log in</a></p>
  </div>
</section>

<!-- FOOTER -->
<footer>
  <div class="footer-top">
    <div class="footer-brand">
      <a href="/" class="nav-logo"><div class="nav-logo-icon"><svg viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2"><line x1="12" y1="3" x2="12" y2="21"/><line x1="8" y1="21" x2="16" y2="21"/><polyline points="5,7 12,3 19,7"/><polyline points="3,13 5,7 7,13"/><polyline points="17,13 19,7 21,13"/><path d="M3 13a2 2 0 0 0 4 0"/><path d="M17 13a2 2 0 0 0 4 0"/></svg></div><span class="nav-logo-text">ShelfSpace</span></a>
      <p>The operating system for cannabis consignment.</p>
    </div>
    <div class="footer-col"><h4>Platform</h4><ul><li><a href="/features">Features</a></li><li><a href="/how-it-works">How It Works</a></li><li><a href="/pricing">Pricing</a></li><li><a href="/about">About</a></li></ul></div>
    <div class="footer-col"><h4>Access</h4><ul><li><a href="https://ourshelf.space">Login</a></li><li><a href="/signup">Sign Up</a></li><li><a href="/contact">Contact</a></li></ul></div>
    <div class="footer-col"><h4>Company</h4><ul><li><a href="mailto:chris@shelfspace.pro">Email</a></li><li><a href="mailto:support@shelfspace.pro">Support</a></li><li><a href="https://linkedin.com/company/shelfspace-pro" target="_blank" rel="noopener" class="footer-social-link"><svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433a2.062 2.062 0 01-2.063-2.065 2.064 2.064 0 112.063 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg> LinkedIn</a></li></ul></div>
  </div>
  <div class="footer-bottom"><p>&copy; 2026 ShelfSpace Technologies Inc.</p><div class="footer-bottom-links"><a href="/privacy">Privacy</a><a href="/terms">Terms</a></div></div>
</footer>

<script src="demo-modal.js"></script>
<script>
  document.getElementById('nav').classList.toggle('scrolled', window.scrollY > 20);
  window.addEventListener('scroll', () => document.getElementById('nav').classList.toggle('scrolled', window.scrollY > 20));

  var turnstileToken = null;
  var passwordValid = false;

  // Password strength validation
  var pwRules = [
    { id: 'pwLen',     test: function(p) { return p.length >= 8; } },
    { id: 'pwUpper',   test: function(p) { return /[A-Z]/.test(p); } },
    { id: 'pwLower',   test: function(p) { return /[a-z]/.test(p); } },
    { id: 'pwNum',     test: function(p) { return /[0-9]/.test(p); } },
    { id: 'pwSpecial', test: function(p) { return /[^A-Za-z0-9]/.test(p); } },
  ];

  function checkPassword() {
    var pw = document.getElementById('password').value;
    var allMet = true;
    pwRules.forEach(function(rule) {
      var el = document.getElementById(rule.id);
      var met = rule.test(pw);
      el.classList.toggle('met', met);
      if (!met) allMet = false;
    });
    passwordValid = allMet;
    updateSubmitBtn();
  }

  function updateSubmitBtn() {
    document.getElementById('submitBtn').disabled = !(turnstileToken && passwordValid);
  }

  document.getElementById('password').addEventListener('input', checkPassword);

  function onTurnstileSuccess(token) {
    turnstileToken = token;
    updateSubmitBtn();
  }

  function onTurnstileExpired() {
    turnstileToken = null;
    updateSubmitBtn();
  }

  document.getElementById('signupForm').addEventListener('submit', async (e) => {
    e.preventDefault();
    if (!turnstileToken || !passwordValid) return;
    const btn = document.getElementById('submitBtn');
    const errorEl = document.getElementById('formError');
    errorEl.style.display = 'none';
    btn.disabled = true;
    btn.innerHTML = '<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" style="animation:spin 1s linear infinite"><path d="M21 12a9 9 0 11-6.219-8.56"/></svg> Creating account\u2026';

    const body = {
      firstName: document.getElementById('firstName').value.trim(),
      lastName: document.getElementById('lastName').value.trim(),
      email: document.getElementById('email').value.trim(),
      businessName: document.getElementById('businessName').value.trim(),
      businessType: document.getElementById('businessType').value,
      state: document.getElementById('state').value.trim(),
      password: document.getElementById('password').value,
      'cf-turnstile-response': turnstileToken,
    };

    try {
      const res = await fetch('/api/public/signup', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(body),
      });

      if (!res.ok) {
        const data = await res.json().catch(() => null);
        if (data?.code === 'EMAIL_EXISTS') {
          errorEl.innerHTML = 'A user with that email already exists. <a href="https://ourshelf.space" style="color:var(--green-mid);font-weight:600;text-decoration:none;">Log in instead &rarr;</a>';
          errorEl.style.display = 'block';
          btn.disabled = false;
          btn.innerHTML = 'Create Account <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><line x1="5" y1="12" x2="19" y2="12"/><polyline points="12 5 19 12 12 19"/></svg>';
          return;
        }
        if (data?.code === 'BUSINESS_EXISTS') {
          errorEl.innerHTML = 'This business already exists on ShelfSpace. Ask your account admin to add you as a user, or <a href="https://ourshelf.space" style="color:var(--green-mid);font-weight:600;text-decoration:none;">log in here &rarr;</a><br><br>If this seems like an error, email us at <a href="mailto:support@shelfspace.pro" style="color:var(--green-mid);font-weight:600;text-decoration:none;">support@shelfspace.pro</a>.';
          errorEl.style.display = 'block';
          btn.disabled = false;
          btn.innerHTML = 'Create Account <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><line x1="5" y1="12" x2="19" y2="12"/><polyline points="12 5 19 12 12 19"/></svg>';
          return;
        }
        throw new Error(data?.message || 'Something went wrong. Please try again.');
      }

      const data = await res.json();

      // Auto-login: redirect to magic link if available
      if (data.login_url) {
        btn.innerHTML = '<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" style="animation:spin 1s linear infinite"><path d="M21 12a9 9 0 11-6.219-8.56"/></svg> Logging you in\u2026';
        window.location.href = data.login_url;
        return;
      }

      // Fallback: show success screen if no login URL
      document.getElementById('signupForm').style.display = 'none';
      document.getElementById('formSuccess').style.display = 'block';
    } catch (err) {
      errorEl.textContent = err.message;
      errorEl.style.display = 'block';
      turnstile.reset();
      turnstileToken = null;
      updateSubmitBtn();
      btn.innerHTML = 'Create Account <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><line x1="5" y1="12" x2="19" y2="12"/><polyline points="12 5 19 12 12 19"/></svg>';
    }
  });
</script>
</body>
</html>
